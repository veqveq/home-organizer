<form [formGroup]="form" (ngSubmit)="create()">
  <input
    [ngClass]="name.errors != null ? 'border-2 border-red-500':''"
    type="text"
    class="border w-full py-2 px-4 mb-2 rounded"
    placeholder="Название справочника"
    formControlName="name"
    appFocus
  />

  <p
    *ngIf="name.errors?.required"
    class="text-red-600 font-medium mb-2 text-center"
  >
    Обязательное
  </p>
  <p
    class="text-red-600 font-medium mb-2 text-center"
    *ngIf="name.errors?.minlength"
  >
    Короткое название. {{name.value.length}}/3 символов
  </p>

  <textarea
    class="border w-full py-2 px-4 mb-2 rounded"
    placeholder="Описание справочника"
    formControlName="description"
    appFocus
  ></textarea>

  <ng-template appRef></ng-template>

  <div class="px-2 py-2 mb-4 grid justify-items-stretch">
    <button
      type="button"
      class="justify-self-end text-blue-500 hover:text-blue-700"
      (click)="addField()"
    >+ Добавить поле
    </button>
  </div>

  <hr class="mb-4">

  <div [ngSwitch]="dictionary != null" class="px-4">
    <div *ngSwitchCase="false" class="flex justify-between">
      <button type="submit"
              class="rounded py-2 px-4 bg-blue-500 text-white hover:bg-blue-700">
        Сохранить
      </button>
      <button
        type="button"
        class="rounded py-2 px-4 bg-red-500 text-white hover:bg-red-700"
        (click)="close(); clean()"
      >Отмена
      </button>
    </div>
    <div *ngSwitchCase="true" class="flex justify-between">
      <button type="button"
              (click)="update()"
              class="rounded py-2 px-4 bg-blue-500 text-white hover:bg-blue-700">
        Обновить
      </button>
      <button
        type="button"
        class="rounded py-2 px-4 bg-red-500 text-white hover:bg-red-700"
        (click)="close()"
      >Отмена
      </button>
    </div>
  </div>
</form>
